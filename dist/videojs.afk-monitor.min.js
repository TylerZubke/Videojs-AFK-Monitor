!function(){"use strict";videojs.registerPlugin("AFKMonitor",(function(t){var n,e,o,u,i=this,a={countdownTimeoutId:null,buttonTimeoutId:null},s=videojs.obj.merge({containerText:"Are you still watching?",containerClass:"",continueButtonText:"Yes, Continue",continueButtonClass:"",stopButtonText:"No",stopButtonClass:"",waitClass:"",showMessageAfter:12e5,pausePlayerAfter:1e4,continueButtonClickHandler:null,stopButtonClickHandler:null,ignoreUserActive:!1},t),c=function(){r("countdownTimeoutId"),l()?(p(),a.buttonTimeoutId=i.setTimeout((function(){i.pause()}),s.pausePlayerAfter),i.one("play",(function(){f(),r("buttonTimeoutId")}))):i.setTimeout(c,1e4)},l=function(){return(!s.waitClass||!i.hasClass(s.waitClass))&&(!(i.currentTime()+s.pausePlayerAfter/1e3+1>i.duration())&&!i.paused())},r=function(t){var n=a[t];n&&i.clearTimeout(n),a[t]=null},d=function(t){f(),r("buttonTimeoutId"),"function"==typeof s.continueButtonClickHandler?s.continueButtonClickHandler.call(i,t):i.paused()&&i.play()},m=function(t){f(),r("buttonTimeoutId"),"function"==typeof s.stopButtonClickHandler?s.stopButtonClickHandler.call(i,t):(i.pause().currentTime(0).trigger("loadstart"),i.hasStarted(!1))},f=function(){n.className.match(/\bhidden\b/)||(n.className+=" hidden")},p=function(){n.className=n.className.replace(/\bhidden\b/,"")},T=function(){(n=document.createElement("div")).className="vjs-afk-container "+s.containerClass,f(),(e=document.createElement("h1")).className="container-text",e.innerHTML=s.containerText,(o=document.createElement("button")).className="vjs-afk-button afk-button "+s.continueButtonClass,o.innerHTML=s.continueButtonText,o.addEventListener("click",d),(u=document.createElement("button")).className="vjs-afk-button afk-button "+s.stopButtonClass,u.innerHTML=s.stopButtonText,u.addEventListener("click",m),n.appendChild(e),n.appendChild(o),n.appendChild(u),i.el().appendChild(n),i.on("userinactive",(function(){a.countdownTimeoutId&&r("countdownTimeoutId"),a.countdownTimeoutId=i.setTimeout(c,s.showMessageAfter)})),s.ignoreUserActive||i.on("useractive",(function(){r("countdownTimeoutId")}))};i.ready((function(){T()}))}))}();
